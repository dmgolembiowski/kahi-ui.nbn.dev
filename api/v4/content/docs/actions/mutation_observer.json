{"data":{"metadata":{"authors":{},"created_at":1633108516000,"identifier":"/docs/actions/mutation_observer","modified_at":1645838554000,"sections":[{"identifier":"mutation_observer","level":1,"text":"mutation_observer"},{"identifier":"imports","level":2,"text":"Imports"},{"identifier":"compatibility","level":2,"text":"Compatibility"}],"snippets":[{"identifier":"mutation_observer-preview","script":"<script>\n    import {\n        Button,\n        mutation_observer,\n    } from \"@kahi-ui/framework\";\n\n    let palette = \"affirmative\";\n</script>\n\n<Button\n    on:click={(event) =>\n        (palette =\n            palette === \"affirmative\"\n                ? \"negative\"\n                : \"affirmative\")}\n>\n    Toggle Palette\n</Button>\n\n<div\n    class=\"box\"\n    data-palette={palette}\n    use:mutation_observer={{\n        attributes: true,\n        on_mutate: (mutations) =>\n            console.log(\"on_mutate\", {mutations}),\n    }}\n>\n    click the above button and watch console for\n    logging\n</div>","syntax":"svelte","title":"mutation_observer Preview"},{"identifier":"mutation_observer-imports","script":"import {mutation_observer} from \"@kahi-ui/framework\";","syntax":"javascript","title":"mutation_observer Imports"}],"title":"mutation_observer"},"references":{"custom_properties":{},"events":{},"properties":{},"slots":{}},"render":"<blockquote data-palette=\"accent\">\n<p><strong>NOTE</strong>: Introduced feature in <code>v0.4.1</code>.</p>\n</blockquote>\n<p><code>mutation_observer</code> is a <a href=\"https://svelte.dev/docs#use_action\" target=\"_blank\" rel=\"noopener noreferrer\">Svelte Action</a>, which runs a <code>on_mutate(mutations: MutationRecord[]): void</code> callback whenever the targetted element intersects the root viewport.</p>\n<pre class=\"highlight language-svelte\" data-identifier=\"mutation_observer-preview\" data-mode=\"repl\" data-syntax=\"svelte\"><code><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n    <span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span>\n        Button<span class=\"token punctuation\">,</span>\n        mutation_observer<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"@kahi-ui/framework\"</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">let</span> palette <span class=\"token operator\">=</span> <span class=\"token string\">\"affirmative\"</span><span class=\"token punctuation\">;</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Button</span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">on:</span>click=</span><span class=\"token language-javascript\"><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n        <span class=\"token punctuation\">(</span>palette <span class=\"token operator\">=</span>\n            palette <span class=\"token operator\">===</span> <span class=\"token string\">\"affirmative\"</span>\n                <span class=\"token operator\">?</span> <span class=\"token string\">\"negative\"</span>\n                <span class=\"token operator\">:</span> <span class=\"token string\">\"affirmative\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span>\n<span class=\"token punctuation\">></span></span>\n    Toggle Palette\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>Button</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span>\n    <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>box<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\">data-palette=</span><span class=\"token language-javascript\"><span class=\"token punctuation\">{</span>palette<span class=\"token punctuation\">}</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">use:</span>mutation_observer=</span><span class=\"token language-javascript\"><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span>\n        attributes<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n        <span class=\"token function-variable function\">on_mutate</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">mutations</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n            console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"on_mutate\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>mutations<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span>\n<span class=\"token punctuation\">></span></span>\n    click the above button and watch console for\n    logging\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></code></pre><h2 id=\"imports\">Imports</h2>\n<pre class=\"highlight language-javascript\" data-identifier=\"mutation_observer-imports\" data-mode=\"default\" data-syntax=\"javascript\"><code><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span>mutation_observer<span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"@kahi-ui/framework\"</span><span class=\"token punctuation\">;</span></code></pre><h2 id=\"compatibility\">Compatibility</h2>\n<p>Svelte Actions are always ran on Javascript-enabled Browser. So should not be used for critical end-user functionality, only progressive enhancement. The Action is dependent on <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/MutationObserver\" target=\"_blank\" rel=\"noopener noreferrer\"><code>MutationObserver</code></a>.</p>\n"}}